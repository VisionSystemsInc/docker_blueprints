version: '2.3'

services:

  gdal:
    build:
      context: ..
      dockerfile: blueprint_gdal.Dockerfile
      args:
        GDAL_VERSION: "3.2.3"
    image: &gdal_image vsiri/blueprint_test:gdal-3.2.3

  # pdal:
  #   build:
  #     context: ..
  #     dockerfile: blueprint_pdal.Dockerfile
  #     args:
  #       GDAL_IMAGE: *gdal_image
  #       PDAL_VERSION: "2.2.0"
  #   image: &pdal_image vsiri/blueprint_test:pdal-2.2.0

  # test_gdal:
  #   build:
  #     context: .
  #     dockerfile: test_gdal.Dockerfile
  #     args:
  #       GDAL_IMAGE: *gdal_image
  #   image: vsiri/blueprint_test:test_gdal

  # test_pdal:
  #   build:
  #     context: .
  #     dockerfile: test_pdal.Dockerfile
  #   args:
  #     GDAL_IMAGE: *gdal_image
  #     PDAL_IMAGE: *pdal_image
  #   image: vsiri/blueprint_test:test_pdal
